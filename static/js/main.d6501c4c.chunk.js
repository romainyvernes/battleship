(this.webpackJsonpbattleship=this.webpackJsonpbattleship||[]).push([[0],[,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),i=n(7),o=n.n(i),c=(n(13),n(3)),s=n(1),u=(n(14),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=new Array(t).fill(0),r=function(t){if(1===n[t])throw new Error("Position already hit");n[t]=1},a=function(){for(var t=0;t<n.length;t++)if(0===n[t])return!1;return!0};return{name:e,parts:n,hit:r,isSunk:a}}),h=function(t,e){var n=[];if(!(t>0&&e>0))throw new Error("Invalid width or height");for(var r=0;r<e;r++){n.push([]);for(var a=0;a<t;a++)n[r].push(!1)}var i=function(t,e,n){var r=Object(s.a)(t,2),a=[],i=[r[0],r[1]].map((function(t){return parseInt(t,10)})),o=Object(s.a)(i,2),c=o[0],u=o[1];if("y"===n){for(var h=u;h<u+e;h++)a.push([c,h]);return a}for(var l=c;l<c+e;l++)a.push([l,u]);return a},o=function(t){var e=t[0].concat(t[t.length-1]),r=Object(s.a)(e,4),a=r[0],i=r[1],o=r[2],c=r[3];return a>=0&&a<n[0].length&&i>=0&&i<n.length&&o>=0&&o<n[0].length&&c>=0&&c<n.length},c=function(t){for(var e=0;e<t.length;e++)if(Number.isInteger(n[t[e][1]][t[e][0]]))return!0;return!1},h=[],l=function(t,e){var r=t[0].concat(t[t.length-1]),a=Object(s.a)(r,4),i=a[0],l=a[1],d=a[2],m=a[3];if(!o(t))throw new Error("Position out of range");if(i===d&&l>m||l===m&&i>d)throw new Error("Please enter coordinates from left to right/top to bottom");if(c(t))throw new Error("Another ship is already positioned here");h.push({coords:{start:[i,l],end:[d,m]},ship:u(t.length,e)}),t.map((function(t){var e=Object(s.a)(t,2),r=e[0],a=e[1];return n[a][r]=h.length-1}))};return{grid:n,getShipCoords:i,isTaken:c,isInRange:o,addShip:l,receiveAttack:function(t){var e=Object(s.a)(t,2),r=e[0],a=e[1];if(r<0||r>n[0].length-1||a<0||a>n.length-1)throw new Error("Position is out of range");switch(n[a][r]){case!1:return n[a][r]="miss",{message:"miss"};case"miss":throw new Error("Position already hit");default:var i=function(t,e){var n,r=Object(s.a)(e,2),a=r[0],i=r[1],o=h[t],c=o.ship,u=o.coords;return n=u.start[0]===u.end[0]?i-u.start[1]:a-u.start[0],c.hit(n),c}(n[a][r],[r,a]);return n[a][r]="hit",{message:"hit",ship:i}}},isGameOver:function(){for(var t=0;t<h.length;t++)if(!h[t].ship.isSunk())return!1;return!0},placeShipRandomly:function(n,r){for(var a=["x","y"],o=!0;o;)try{var c=Math.floor(Math.random()*t),s=Math.floor(Math.random()*e),u=a[Math.floor(2*Math.random())],h=i([c,s],n,u);l(h,r),o=!1}catch(d){continue}}}},l=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.name,n=t.boardWidth,r=t.boardHeight,a=!1,i=[],o=0;o<r;o++)for(var c=0;c<n;c++)i.push([c,o]);var s=function(){a&&(a=!1),a=!0},u=function(){return a},h=function(){if(0===i.length)return"All positions targeted";var t=Math.floor(Math.random()*i.length),e=i[t];return i.splice(t,1),e};return{name:e,toggleTurn:s,getAttackCoords:h,getTurnStatus:u}},d=function(){var t=10,e=l(),n=l({boardHeight:t,boardWidth:t}),r=h(t,t),a=h(t,t),i=[{name:"carrier",length:5},{name:"battleship",length:4},{name:"destroyer",length:3},{name:"submarine",length:3},{name:"patrol boat",length:2}];i.map((function(t){return a.placeShipRandomly(t.length,t.name)}));return{human:e,computer:n,humanBoard:r,computerBoard:a,isGameOver:function(){return!(!r.isGameOver()&&!a.isGameOver())},shipsToPlace:i}}(),m=(n(15),n(8)),f=n.n(m),p=n(0),g=function(t){var e=t.grid,n=t.playerType,r=t.onAttack,a=t.mode,i=t.axis,o=t.onPositionHover,c=t.onPositionOut,s=t.onPlaceShip;return Object(p.jsx)("div",{className:"board",children:Object(p.jsx)("div",{className:"content",children:e.map((function(t,e){return t.map((function(t,u){return Object(p.jsxs)("div",{className:"board-element".concat(a||"string"!==typeof t?"":" ".concat(t)).concat(a&&!0===t?" allowed":"").concat(a&&!0!==t?" not-allowed":""," ").concat(n||"").concat(!Number.isInteger(t)||"human"!==n&&n?"":" ship"),id:"".concat(u,"-").concat(e),onClick:s||r||null,onMouseEnter:o||null,onMouseLeave:c||null,"data-axis":i||null,children:[("human"===n||a)&&Number.isInteger(t)?"\u25cf":null,"hit"===t||"miss"===t?"\u2715":null]},f()())}))}))})})},b=(n(18),function(t){var e=t.grid,n=t.onPositionHover,a=t.onPositionOut,i=t.onPlaceShip,o=Object(r.useState)("x"),c=Object(s.a)(o,2),u=c[0],h=c[1];return Object(p.jsxs)("div",{className:"setup",children:[Object(p.jsx)("p",{className:"axis-selection",onClick:function(){h("x"===u?"y":"x")},children:"x"===u?"Horizontal":"Vertical"}),Object(p.jsx)(g,{grid:e,mode:"setup",axis:u,onPositionHover:n,onPositionOut:a,onPlaceShip:i})]})}),j=(n(19),function(t){var e=t.humanGrid,n=t.computerGrid,r=t.onAttack,a=t.playStatus;return Object(p.jsxs)("div",{className:"main",children:[Object(p.jsxs)("div",{className:"grid-container",id:"friendly",children:[Object(p.jsx)("h2",{children:"Friendly Waters"}),Object(p.jsx)(g,{grid:e,playerType:"human"})]}),Object(p.jsxs)("div",{className:"grid-container",id:"enemy",children:[Object(p.jsx)("h2",{children:"Enemy Waters"}),Object(p.jsx)(g,{grid:n,playerType:"computer",onAttack:a?r:null})]})]})}),v=(n(20),function(t){var e=t.message;return Object(p.jsx)("div",{className:"dialog-box",children:Object(p.jsx)("p",{children:e},e)})}),O=function(){var t=Object(r.useState)(d.humanBoard.grid.map((function(t){return Object(c.a)(t)}))),e=Object(s.a)(t,2),n=e[0],a=e[1],i=Object(r.useState)(d.computerBoard.grid.map((function(t){return Object(c.a)(t)}))),o=Object(s.a)(i,2),u=o[0],h=o[1],l=Object(r.useState)(!0),m=Object(s.a)(l,2),f=m[0],g=m[1],O=Object(r.useState)(0),x=Object(s.a)(O,2),y=x[0],w=x[1],P=Object(r.useState)(""),S=Object(s.a)(P,2),k=S[0],T=S[1];Object(r.useEffect)((function(){y<d.shipsToPlace.length?T("Admiral, where shall we place our ".concat(d.shipsToPlace[y].name," ?")):T("Admiral, what are your next orders ?")}),[y]);var A=function(t,e){var n="";n+="human"===e?"Our fleet is firing at the enemy":"The enemy is firing";var r=t.message,a=t.ship;"miss"===r&&(n+="...but missed"),"hit"===r&&(a.isSunk()?n+="...and sank a ".concat(a.name):n+="...and struck a ship"),T(n)};return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsx)("h1",{children:"BATTLESHIP"}),Object(p.jsx)(v,{message:k}),Object(p.jsx)("button",{type:"submit",onClick:function(){window.location.reload()},id:"restart-btn",className:!d.isGameOver()||y<d.shipsToPlace.length?"hide-restart":"",children:"Ready for another battle ?"}),y<d.shipsToPlace.length?Object(p.jsx)(b,{grid:n,onPositionHover:function(t){var e=t.currentTarget,n=e.id,r=e.dataset,i=d.humanBoard,o=i.getShipCoords,u=i.isTaken,h=i.isInRange,l=i.grid,m=d.shipsToPlace,f=o(n.split("-"),m[y].length,r.axis);h(f)&&!u(f)&&(f.map((function(t){var e=Object(s.a)(t,2),n=e[0],r=e[1];return l[r][n]=!0})),a(l.map((function(t){return Object(c.a)(t)}))))},onPositionOut:function(){for(var t=d.humanBoard.grid,e=0;e<t.length;e++)for(var n=0;n<t[0].length;n++)!0===t[e][n]&&(t[e][n]=!1);a(t.map((function(t){return Object(c.a)(t)})))},onPlaceShip:function(t){var e=t.currentTarget,n=e.id,r=e.dataset,i=d.humanBoard,o=i.grid,s=i.addShip,u=i.getShipCoords,h=i.isTaken,l=i.isInRange,m=d.shipsToPlace,f=u(n.split("-"),m[y].length,r.axis);l(f)&&!h(f)&&(s(f,m[y].name),w(y+1),a(o.map((function(t){return Object(c.a)(t)}))))}}):Object(p.jsx)(j,{humanGrid:n,computerGrid:u,onAttack:function(t){var e=t.currentTarget.id,n=d.computerBoard,r=d.humanBoard,i=d.isGameOver,o=d.computer;A(n.receiveAttack(e.split("-")),"human"),h(n.grid.map((function(t){return Object(c.a)(t)}))),i()?(g(!1),r.isGameOver()?T("We've lost this battle, Admiral"):T("We have defeated the enemy !")):(g(!1),setTimeout((function(){A(r.receiveAttack(o.getAttackCoords()),"computer"),a(r.grid.map((function(t){return Object(c.a)(t)}))),g(!0)}),3e3))},playStatus:f})]})};o.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(O,{})}),document.getElementById("root"))}],[[21,1,2]]]);
//# sourceMappingURL=main.d6501c4c.chunk.js.map